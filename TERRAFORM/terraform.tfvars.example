# ========================================
# Azure Configuration
# ========================================

# Azure å€åŸŸé¸æ“‡æŒ‡å—ï¼ˆå°ç£ç”¨æˆ¶ï¼‰
# 
# ğŸ‡¹ğŸ‡¼ å¾å°ç£é€£ç·šçš„æœ€ä½³é¸æ“‡ï¼š
# 1. eastasia (é¦™æ¸¯)        - å»¶é² ~25ms, Spot ç©©å®šæ€§æ¥µä½³ â­â­â­â­â­ æ¨è–¦é¦–é¸
# 2. southeastasia (æ–°åŠ å¡) - å»¶é² ~50ms, Spot ç©©å®šæ€§æ¥µä½³ â­â­â­â­â­
# 3. japaneast (æ±äº¬)       - å»¶é² ~45ms, Spot ç©©å®šæ€§ä½³   â­â­â­â­
# 4. koreacentral (é¦–çˆ¾)    - å»¶é² ~40ms, Spot ç©©å®šæ€§ä½³   â­â­â­â­
#
# ğŸ’¡ å»ºè­°ï¼šä½¿ç”¨ eastasia (é¦™æ¸¯) - å»¶é²æœ€ä½ä¸” Spot VM ä¾›æ‡‰å……è¶³
location = "eastasia"

# Resource Group åç¨±
resource_group_name = "rg-github-runners"

# è³‡æºåç¨±å‰ç¶´ï¼ˆå°‡ç”¨æ–¼æ‰€æœ‰è³‡æºåç¨±ï¼‰
prefix = "gh-runner"

# ========================================
# Virtual Machine Configuration
# ========================================

# VM è¦æ ¼å¤§å°
# å»ºè­°é¸é …:
#   - Standard_D4s_v5 (4 vCPU, 16GB RAM) - é©åˆ 2-3 å€‹ runners
#   - Standard_D8s_v5 (8 vCPU, 32GB RAM) - é©åˆ 4-6 å€‹ runners
#   - Standard_D16s_v5 (16 vCPU, 64GB RAM) - é©åˆ 8-10 å€‹ runners
# 
# Spot VM å»ºè­°é¸æ“‡è¼ƒæ–°ä¸–ä»£ä¸”ä¾›æ‡‰å……è¶³çš„è¦æ ¼ï¼Œä¾‹å¦‚ï¼š
#   - Dsv5 ç³»åˆ—ï¼ˆæœ€æ–°ï¼‰
#   - Dasv5 ç³»åˆ—ï¼ˆAMDï¼Œé€šå¸¸æ›´ä¾¿å®œï¼‰
vm_size = "Standard_D4s_v5"

# ========================================
# Spot VM Configurationï¼ˆç¯€çœæˆæœ¬ï¼‰
# ========================================

# å•Ÿç”¨ Spot VMï¼ˆå¯ç¯€çœ 70-90% æˆæœ¬ï¼‰
# æ³¨æ„ï¼šSpot VM å¯èƒ½åœ¨ Azure éœ€è¦å®¹é‡æ™‚è¢«å›æ”¶
enable_spot_vm = true

# Spot VM å›æ”¶ç­–ç•¥
# - "Deallocate": å›æ”¶æ™‚åœæ­¢ VMï¼Œä¿ç•™é…ç½®ï¼ˆæ¨è–¦ï¼‰
#                 å„ªé»ï¼šå¯ä»¥å¿«é€Ÿé‡æ–°å•Ÿå‹•ï¼Œä¿ç•™ç£ç¢Ÿè³‡æ–™
#                 ç¼ºé»ï¼šéœ€æ”¯ä»˜ç£ç¢Ÿå„²å­˜è²»ç”¨
# - "Delete": å›æ”¶æ™‚å®Œå…¨åˆªé™¤ VM
#             å„ªé»ï¼šä¸æ”¶å–ä»»ä½•è²»ç”¨
#             ç¼ºé»ï¼šéœ€è¦é‡æ–°éƒ¨ç½²ï¼Œè³‡æ–™æœƒéºå¤±
spot_eviction_policy = "Deallocate"

# Spot VM æœ€é«˜å‡ºåƒ¹ï¼ˆUSD/å°æ™‚ï¼‰
# - -1: é¡˜æ„æ”¯ä»˜æœ€é«˜åˆ°éš¨éœ€åƒ¹æ ¼ï¼ˆå¼·çƒˆå»ºè­°ï¼å¤§å¹…é™ä½è¢«å›æ”¶é¢¨éšªï¼‰
# - è‡ªè¨‚åƒ¹æ ¼: ä¾‹å¦‚ 0.05ï¼ˆæ¯å°æ™‚ $0.05 USDï¼‰
# 
# ğŸ’¡ å»ºè­°ä½¿ç”¨ -1 çš„åŸå› ï¼š
#   1. Spot åƒ¹æ ¼é€šå¸¸é ä½æ–¼éš¨éœ€åƒ¹æ ¼ï¼ˆ70-90% æŠ˜æ‰£ï¼‰
#   2. å³ä½¿è¨­å®šç‚ºéš¨éœ€åƒ¹æ ¼ï¼Œå¯¦éš›ä»˜è²»ä»æ˜¯ç•¶å‰ Spot åƒ¹æ ¼
#   3. å¤§å¹…é™ä½å› åƒ¹æ ¼è€Œè¢«å›æ”¶çš„é¢¨éšª
#   4. åªæœ‰å®¹é‡ä¸è¶³æ™‚æ‰æœƒè¢«å›æ”¶ï¼ˆè€Œéåƒ¹æ ¼å› ç´ ï¼‰
spot_max_bid_price = -1

# OS ç£ç¢Ÿé¡å‹
# é¸é …: Standard_LRS, StandardSSD_LRS, Premium_LRS
os_disk_type = "Premium_LRS"

# OS ç£ç¢Ÿå¤§å° (GB)
os_disk_size_gb = 128

# VM ç®¡ç†å“¡å¸³è™Ÿåç¨±
admin_username = "azureuser"

# SSH å…¬é‘°ï¼ˆè«‹æ›¿æ›ç‚ºæ‚¨çš„ SSH å…¬é‘°ï¼‰
# ç”¢ç”Ÿ SSH é‡‘é‘°: ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
# è®€å–å…¬é‘°: cat ~/.ssh/id_rsa.pub
ssh_public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... your-public-key-here"

# å…è¨± SSH é€£ç·šçš„ä¾†æº IP ç¯„åœ
# ä½¿ç”¨ "*" å…è¨±æ‰€æœ‰ä¾†æºï¼ˆä¸å»ºè­°ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒï¼‰
# ä½¿ç”¨ CIDR æ ¼å¼é™åˆ¶ç‰¹å®šç¯„åœï¼Œä¾‹å¦‚: "1.2.3.4/32" æˆ– "10.0.0.0/8"
ssh_source_address_prefix = "*"

# ========================================
# GitHub Configuration
# ========================================

# GitHub Personal Access Token
# éœ€è¦ä»¥ä¸‹æ¬Šé™:
#   - repo (Full control of private repositories)
#   - admin:org > read:org (Read org and team membership)
# 
# ç”¢ç”Ÿ Token: https://github.com/settings/tokens/new
# æ³¨æ„: Token åƒ…æœƒé¡¯ç¤ºä¸€æ¬¡ï¼Œè«‹å¦¥å–„ä¿å­˜
github_token = "ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# GitHub Repository æˆ– Organization URL
# 
# é¸é … 1: Repository-levelï¼ˆå–®ä¸€å°ˆæ¡ˆï¼‰
#   æ ¼å¼: https://github.com/owner/repository
#   ä¾‹å¦‚: https://github.com/microsoft/vscode
#   é©ç”¨: å€‹äººå¸³è™Ÿæˆ–çµ„ç¹”å…§çš„å–®ä¸€ repo
#   Runner åªæœå‹™é€™ä¸€å€‹ repository
#
# é¸é … 2: Organization-levelï¼ˆå¤šå°ˆæ¡ˆï¼Œéœ€è¦çµ„ç¹”å¸³è™Ÿï¼‰
#   æ ¼å¼: https://github.com/organization-name
#   ä¾‹å¦‚: https://github.com/microsoft
#   é©ç”¨: GitHub çµ„ç¹”å¸³è™Ÿ
#   Runner å¯æœå‹™çµ„ç¹”å…§çš„æ‰€æœ‰ repositories
#   æ³¨æ„: å€‹äººå¸³è™Ÿç„¡æ³•ä½¿ç”¨ organization-level
#
# ğŸ’¡ å»ºè­°:
#   - å€‹äººé–‹ç™¼: ä½¿ç”¨ repository-level
#   - å°åœ˜éšŠ/å¤šå°ˆæ¡ˆ: å…ˆç”¨ repository-levelï¼Œä¹‹å¾Œæˆç«‹çµ„ç¹”æ™‚å†æ”¹
#   - çµ„ç¹”å¸³è™Ÿ: ä½¿ç”¨ organization-levelï¼ˆä¸€å° VM æœå‹™æ‰€æœ‰å°ˆæ¡ˆï¼‰
github_repo_url = "https://github.com/your-username/your-repository"

# ========================================
# GitHub Runners Configuration
# ========================================

# è¦å»ºç«‹çš„ Runner æ•¸é‡ (1-10)
# å»ºè­°æ ¹æ“š VM è¦æ ¼é¸æ“‡:
#   - Standard_D4s_v5: 2-3 å€‹ runners
#   - Standard_D8s_v5: 4-6 å€‹ runners
#   - Standard_D16s_v5: 8-10 å€‹ runners
runner_count = 3

# Runner æ¨™ç±¤ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰
# é€™äº›æ¨™ç±¤ç”¨æ–¼ GitHub Actions workflow çš„ runs-on é¸æ“‡
# é è¨­æ¨™ç±¤æœƒè‡ªå‹•åŒ…å«: self-hosted, linux, x64, azure, runner-N
runner_labels = "self-hosted,linux,x64,azure"

# ========================================
# Resource Tags
# ========================================

tags = {
  Environment = "Production"
  ManagedBy   = "Terraform"
  Purpose     = "GitHub-Runners"
  Project     = "CI-CD-Infrastructure"
  Owner       = "DevOps-Team"
}
